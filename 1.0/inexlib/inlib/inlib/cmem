// Copyright (C) 2010, Guy Barrand. All rights reserved.
// See the file inlib.license for terms.

#ifndef inlib_cmem
#define inlib_cmem

#include <cstdlib>

#ifdef INLIB_MEM
#include "mem"
#endif

namespace inlib {

inline void cmem_free(void* a_p){
  if(a_p) {
    ::free(a_p);
    a_p = 0;
#ifdef INLIB_MEM
    mem::decrement("cmem");
#endif
  }
}

inline void* cmem_alloc(size_t a_size){
  if(a_size<=0) return 0;
  void* p = malloc(a_size);  
  if(!p) return 0;
#ifdef INLIB_MEM
  mem::increment("cmem");
#endif  
  return p;
}

}

#endif
